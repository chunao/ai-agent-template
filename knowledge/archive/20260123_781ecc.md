---
title: Claude CodeとCodexの連携をMCPからSkillに変えたら体験が劇的に改善した
url: https://zenn.dev/owayo/articles/63d325934ba0de
captured_at: 2026-01-23
published_at: 2026-01-14
---

# Claude CodeとCodexの連携をMCPからSkillに変えたら体験が劇的に改善した

## TL;DR & Key Conclusions
Claude CodeとCodex CLIの連携方法をMCP（Model Context Protocol）からSkillへ移行することで、進捗の可視性、制御性、デバッグ性が劇的に改善された。MCPは便利だが長時間タスクでは「ブラックボックス」となり不向き。時間のかかるツールはSkillとしてコマンド経由で実行すべき。

- **進捗可視性の向上**: MCPでは数十分〜1時間以上の無応答状態だったが、Skillでは実行状況がリアルタイムで確認可能
- **制御性の改善**: 動作中か停止中かの判断が困難だったが、ターミナル出力により状況把握と中断判断が容易に
- **デバッグの容易化**: MCPではエラー原因が不明だったが、Skillではエラー出力が見えるため迅速なトラブルシューティングが可能
- **呼び出しの直感性**: `/codex`コマンドや自然言語トリガーによる即座の呼び出しが実現
- **学習効果**: プロセスの可視化により、Codexの思考過程を観察して学べる
- **適用範囲**: コードレビュー、バグ調査、設計相談など幅広いタスクで活用可能

## Quickstart
1. **Skill定義ファイルの作成**: `.claude/skills/codex/SKILL.md`を作成し、以下のYAML Frontmatterを設定
   ```yaml
   ---
   name: codex
   description: |
     Codex CLIを使用してコードや文言について相談・レビューを行う。
     トリガー: "codex", "codexと相談", "codexに聞いて"
   ---
   ```
2. **Codex CLIのインストール**: 事前にCodex CLIをシステムにインストール
3. **Skillからの呼び出し**: Skill内で以下のコマンド形式を使用
   ```bash
   codex exec --full-auto --sandbox read-only --cd <project_directory> "<request>"
   ```
4. **実行**: `/codex`コマンドまたは自然言語トリガー（"codexに聞いて"など）で呼び出し

## Context & Claims (Claim-Evidence-Caveat)
- **Claim**: MCPでの連携は長時間タスクに不向き
    - **Evidence**: 複雑なタスクで数十分から1時間以上の無応答状態が発生。動作中か停止中かの判断が困難。デバッグが極めて難しい。
    - **Caveat**: MCPそのものが悪いわけではなく、長時間実行タスクとの相性の問題。短時間で完了するツールならMCPでも問題ない可能性がある。

- **Claim**: Skillへの移行で進捗可視性が劇的に改善
    - **Evidence**: MCPでは「進捗が全く見えない」状態だったのに対し、Skillではリアルタイムでターミナル出力を確認可能。実行状況の把握と中断判断が容易になった。
    - **Caveat**: Skillとして実装するには、コマンドライン経由での実行をサポートするツールである必要がある。

- **Claim**: Skillは呼び出しの直感性と制御性を提供
    - **Evidence**: スラッシュコマンド（`/codex`）や自然言語トリガーでの即座の呼び出しが可能。プロセスの可視化により安心感が得られる。
    - **Caveat**: Skill定義ファイルの作成と適切なトリガー設定が必要。

- **Claim**: 可視化により学習効果が向上
    - **Evidence**: ターミナル出力でCodexの思考過程を観察できるため、AIエージェントの動作パターンを学べる。
    - **Caveat**: 学習効果を得るには、出力を注意深く観察する時間と意欲が必要。

## Code Snippets
- **Skill定義のYAML Frontmatter**: Codex SkillをClaude Codeに登録するための設定。トリガーワードを定義し、自然言語での呼び出しを可能にする。
- **Codex実行コマンド**: `codex exec --full-auto --sandbox read-only --cd <project_directory> "<request>"` - プロジェクトディレクトリを指定してCodexにタスクを依頼する基本形式。
- **コードレビュー例**: プロジェクト全体のコードをレビューして改善点を指摘させる使用例。
- **バグ調査例**: 特定の問題（認証処理エラーなど）の原因調査をCodexに依頼する使用例。

## Normalized Conditions
- **Use Cases**:
    - 複雑なコードレビューやバグ調査など、時間のかかるタスクをサブエージェントに委任したい場合
    - AIエージェントの実行状況をリアルタイムで監視・制御したい場合
    - デバッグやトラブルシューティングのために詳細な出力ログが必要な場合
    - スラッシュコマンドで即座にツールを呼び出したい場合
    - AIエージェントの思考過程を観察して学習したい場合
- **Anti-Cases**:
    - 数秒で完了する短時間タスク（MCPでも十分な可能性がある）
    - コマンドライン実行をサポートしないツール
    - 出力の可視性を必要としないタスク
- **Decision Triggers**:
    - MCPツールが数十分以上無応答になる問題に直面した場合
    - サブエージェントの実行状況が不明で不安を感じる場合
    - デバッグのためにエラー出力やログが必要になった場合
    - より直感的なツール呼び出し方法が欲しくなった場合
