---
title: MCPでやる必要のない業務をSkillsに置き換えてトークンと時間の消費を爆減してみた
url: https://zenn.dev/moneyforward/articles/c43cc7eff468a7
captured_at: 2026-01-21
published_at: 2026-01-10
---

# MCPでやる必要のない業務をSkillsに置き換えてトークンと時間の消費を爆減してみた

## TL;DR & Key Conclusions

QAチームがテストケース管理においてMCP（Model Context Protocol）からAgent Skills + CLIツールの組み合わせに移行し、トークン消費量と処理時間を大幅に削減した事例。AIが繰り返し同じ構造変換を行う非効率を排除し、数百件のテストケース処理が数十分から数分に短縮された。

- **MCP依存の限界**: MCPだけに頼ると、AIが毎回同じ構造変換を繰り返し、数万トークンを無駄に消費する
- **Agent Skillsの活用**: 事前にCLIツールとPythonスクリプトを用意し、Skillsでその使い方をAIに指示することで効率化
- **YAML形式の採用**: Markdown出力からYAML形式に変更し、プログラム処理と人間の可読性を両立
- **2つのSkill構成**: 一括アップロードSkillと汎用Zephyr操作Skillを作成
- **下流工程の設計重要性**: AI出力を誰が検証し、どのシステムが消費するかを考慮した設計が成功の鍵

## Quickstart

1. **CLI・スクリプトの準備**: Zephyr操作用のCLIツールとバッチ処理用Pythonスクリプトを事前に作成
2. **中間形式の決定**: YAMLを標準フォーマットとして採用（階層構造が明確でJSON/CSVより可読性が高い）
3. **Agent Skillsの作成**: 一括アップロード用Skillと汎用操作用Skillの2種類を定義
4. **AIへの指示統合**: SkillsドキュメントでAIにCLIツールの使い方を教える
5. **運用開始**: AIはYAML生成に集中し、実際のアップロードはスクリプトが処理

## Context & Claims (Claim-Evidence-Caveat)

- **Claim**: MCPのみのアプローチは大量の定型処理には非効率
    - **Evidence**: 数百件のテストケース処理で数十分かかり、数万トークンを消費していた
    - **Caveat**: MCPが適切なユースケースも存在する（API連携など）

- **Claim**: Agent Skills + CLIの組み合わせがトークン効率を劇的に改善する
    - **Evidence**: 処理時間が数十分から数分に短縮
    - **Caveat**: 事前にCLIツールやスクリプトの準備が必要

- **Claim**: YAMLは中間フォーマットとして優れている
    - **Evidence**: JSONより人間が読みやすく、CSVより階層構造を表現しやすい
    - **Caveat**: パース処理の実装が必要

- **Claim**: AI統合の成功には下流工程の設計が重要
    - **Evidence**: 出力を誰が検証し、どうシステムに取り込むかを考慮した設計が効果的だった
    - **Caveat**: 要件によってはシンプルなMCP連携で十分な場合もある

## Code Snippets

該当なし

## Normalized Conditions

- **Use Cases**:
    - 大量のテストケースを外部システム（Zephyrなど）に登録する作業
    - AIに繰り返し同じ構造変換をさせている非効率なワークフロー
    - トークン消費量やAPI呼び出し回数を削減したい場面
    - QA業務のAI自動化を推進したいチーム

- **Anti-Cases**:
    - 少数のテストケースを手動で登録する場合
    - MCPで十分にカバーできるシンプルなAPI連携
    - CLIツールやスクリプトの準備工数を確保できない場合

- **Prerequisites**:
    - Agent Skills機能が使えるAIツール（Claude Codeなど）
    - 対象システムのCLIツールまたはAPI
    - Python等でのスクリプト作成スキル
    - YAMLの基本的な理解

- **Decision Triggers**:
    - MCPでのトークン消費が数万単位になっている
    - 同じ構造変換を何度もAIにさせている
    - テストケース登録に数十分以上かかっている
    - QA作業のスケーラビリティが課題になっている
