---
title: "[翻訳] Anthropic ハッカソン優勝者による Claude Code 完全ガイド"
url: https://zenn.dev/studypocket/articles/claude-code-complete-guide
captured_at: 2026-01-22
published_at: 2026-01-21
---

# [翻訳] Anthropic ハッカソン優勝者による Claude Code 完全ガイド

## TL;DR & Key Conclusions
AnthropicハッカソンでZenithを構築して優勝した著者による、Claude Codeを10ヶ月間使い込んで得た実践的なセットアップガイド。Skill、Hook、Sub Agent、MCP、Pluginを駆使して開発効率を最大化する方法を解説。

- **コンテキスト管理が最重要**: 200kトークンのコンテキストウィンドウも、MCP/Pluginを無制限に有効化すると70kまで減少。20〜30のMCPを設定し、プロジェクトごとに5〜6個のみ有効化する
- **Skillは再利用可能なワークフロー**: `/refactor-clean`、`/tdd`などのコマンドでデッドコードの整理やテスト実施が可能。複数のSkillを1つのプロンプトで連鎖実行できる
- **Hooksで自動化と品質担保**: PreToolUse（長時間コマンド前のtmuxリマインダー）、PostToolUse（Prettierによる自動フォーマット、TypeScriptチェック）、Stop（セッション終了前のconsole.log監査）などで品質を自動的に維持
- **Sub Agentで責任分離**: 計画、アーキテクチャ、TDD、コードレビュー、セキュリティ分析など役割ごとにSub Agentを定義。ツール・MCP・権限を限定してスコープを明確化
- **MCPで外部サービスと統合**: Supabase、GitHub、Vercel、Firecrawlなどと直接連携。プロンプトベースでSQLを実行したりデプロイしたりできる
- **Pluginでツールをパッケージ化**: LSP（TypeScript、Python）、hookify（会話的にHookを作成）、mgrep（ripgrepより高速な検索）などをインストール
- **並列ワークフローで生産性向上**: `/fork`で会話を分岐、Git worktreesで複数Claudeインスタンスを競合なく並列実行
- **ルールで一貫性を維持**: セキュリティ、コーディングスタイル、テスト、Git、Sub Agent使用タイミングなどのベストプラクティスを.rulesフォルダに記述
- **エディタとの統合**: Zed、VSCode、Cursorなどをサポート。LSP Pluginでエディタ外でもコードインテリジェンスを利用可能
- **tmuxで長時間コマンドを管理**: Claudeが実行するbashプロセスをストリーム監視、デタッチ・再アタッチ可能
- **mrep > ripgrep**: ローカル検索だけでなくWeb検索にも対応したmgrepで効率的な情報収集
- **サンドボックスで安全実行**: 危険な操作は制限された環境で実行し、メインシステムを保護

## Quickstart
1. **Skillの作成**: `~/.claude/skills/` に `.md` ファイルを作成してワークフロー定義を記述
2. **Slash Commandの登録**: `~/.claude/commands/` に素早く実行したいプロンプトを保存
3. **MCPの設定**: `~/.claude.json` にMCP設定を追加。未使用のものは `disabledMcpServers` で無効化
4. **Hooksの定義**: `~/.claude/hooks/hooks.json` にトリガーベースの自動化ルールを記述
5. **Sub Agentの作成**: `~/.claude/agents/` にタスク別のSub Agentを定義し、ツール・権限を制限
6. **Rulesの整備**: `~/.claude/rules/` にセキュリティ、コーディングスタイル、テストなどのベストプラクティスを記述
7. **Pluginのインストール**: `claude plugin marketplace add <URL>` でマーケットプレイスを追加、`/plugins` でインストール
8. **カスタムステータスラインの設定**: `/statusline` でユーザー、Gitブランチ、コンテキスト残量、モデル、時間、TODOカウントなどを表示

## Context & Claims (Claim-Evidence-Caveat)

- **Claim**: コンテキストウィンドウの管理が生産性を左右する
    - **Evidence**: 200kトークンのコンテキストウィンドウが、MCP/Pluginの有効化により70kまで減少することがある。著者は14個のMCPを設定しているが、プロジェクトごとに5〜6個のみ有効化
    - **Caveat**: 20〜30のMCP設定、10個以下を有効化、80ツール以下をアクティブに保つことが目安

- **Claim**: SkillとSlash Commandで再利用可能なワークフローを構築できる
    - **Evidence**: `/refactor-clean`、`/tdd`、`/e2e`、`/test-coverage` などのコマンドを連鎖実行。コードマップを更新するSkillで大規模コードベースのナビゲーションを効率化
    - **Caveat**: SkillとSlash Commandは機能が重複しており、保存場所が異なる（前者は `~/.claude/skills`、後者は `~/.claude/commands`）

- **Claim**: Hooksでライフサイクルイベントに自動化を組み込める
    - **Evidence**: PreToolUse（長時間コマンド前のtmux提案、不要な.md作成ブロック、git push前のレビュー）、PostToolUse（Prettier自動フォーマット、TypeScriptチェック、console.log警告）、Stop（console.log監査）など
    - **Caveat**: Hooksは特定のライフサイクルイベントに制限されており、Skillのような汎用的なワークフロー定義には使えない

- **Claim**: Sub Agentで責任を分離し、集中実行ができる
    - **Evidence**: planner（機能実装の計画）、architect（システム設計）、tdd-guide（テスト駆動開発）、code-reviewer（品質レビュー）、security-reviewer（セキュリティ分析）など役割別に定義
    - **Caveat**: 適切なスコーピングのため、Sub Agentごとに許可されるツール、MCP、権限を明示的に設定する必要がある

- **Claim**: MCPでプロンプトベースの外部サービス統合が可能
    - **Evidence**: Supabase MCPでコピペなしにSQLを実行、Firecrawl/GitHub/Vercel/Railwayなども同様に統合。Chrome in Claude（組み込みPlugin MCP）でブラウザを制御
    - **Caveat**: APIの代替ではなく、ツールを呼び出すためのプロンプト駆動型プロトコル

- **Claim**: Git worktreesと `/fork` で並列実行が可能
    - **Evidence**: `/fork` で会話を分岐して異なるタスクを並列実行、`git worktree add` で競合なしに複数Claudeインスタンスを実行
    - **Caveat**: 競合のないタスクに限定される

- **Claim**: tmuxで長時間実行コマンドのセッション永続化が可能
    - **Evidence**: `tmux new -s dev` でセッションを作成、Claudeがそこでコマンドを実行、デタッチ・再アタッチ可能
    - **Caveat**: Hook（PreToolUse）でtmux使用をリマインドする必要がある

- **Claim**: mgrepはripgrep/grepより優れた検索ツール
    - **Evidence**: ローカル検索（`mgrep "function handleSubmit"`）とWeb検索（`mgrep --web "Next.js 15 app router changes"`）の両方をサポート
    - **Caveat**: Plugin マーケットプレイスからインストールし、`/mgrep` Skillを使用する必要がある

- **Claim**: Rulesで一貫したベストプラクティスを強制できる
    - **Evidence**: セキュリティ（ハードコードされたシークレット禁止、入力検証）、コーディングスタイル（イミュータビリティ、ファイル整理）、テスト（TDDワークフロー、80%カバレッジ）、Git（コミットフォーマット、PRプロセス）、パフォーマンス（モデル選択、コンテキスト管理）など
    - **Caveat**: 単一CLAUDE.md（すべてを1つのファイル）またはルールフォルダ（関心事ごとにグループ化）の2つのアプローチがある

- **Claim**: LSP Pluginでエディタなしでもコードインテリジェンスを得られる
    - **Evidence**: TypeScript LSP（TypeScriptインテリジェンス）、Pyright LSP（Python型チェック）などをインストール
    - **Caveat**: エディタ外でClaude Codeを頻繁に実行する場合に特に有用

- **Claim**: カスタムステータスラインでプロジェクト状態を可視化できる
    - **Evidence**: ユーザー、ディレクトリ、Gitブランチ（ダーティインジケーター付き）、残りコンテキスト%、モデル、時間、TODOカウントを表示
    - **Caveat**: `/statusline` で設定可能。Claudeは「ステータスラインがない」と言うかもしれないが、セットアップして何を表示させたいか指定できる

- **Claim**: GitHub Actions CI/CDでPRの自動コードレビューが可能
    - **Evidence**: 設定すれば、Claudeが自動的にPRをレビュー
    - **Caveat**: 詳細はAnthropicのドキュメントを参照

- **Claim**: サンドボックスモードで危険な操作を安全に実行できる
    - **Evidence**: Claudeはメインシステムに影響を与えない制限された環境で実行される
    - **Caveat**: 詳細はAnthropicのドキュメントを参照

## Code Snippets
- **MCP設定例（~/.claude.json）**: GitHub、Firecrawl、Supabase、Memory、Sequential Thinking、Vercel、Railway、Cloudflare、ClickHouse、Ableton、MagicUIなどのMCPサーバーをnpx/uvxで起動
- **Hook設定例（hooks.json）**: PreToolUse（長時間コマンド用tmuxリマインダー、不要な.md作成ブロック、git push前レビュー）、PostToolUse（Prettier自動フォーマット、TypeScriptチェック、console.log警告）、Stop（console.log監査）
- **Project別MCP無効化設定**: `disabledMcpServers` 配列で不要なMCPを無効化し、コンテキストウィンドウを管理
- **カスタムステータスライン設定**: ユーザー、ディレクトリ、Gitブランチ、コンテキスト残量、モデル、時間、TODOカウントを表示するJSON設定
- **tmux基本コマンド**: `tmux new -s dev` でセッション作成、`tmux attach -t dev` で再アタッチ
- **mgrep使用例**: `mgrep "function handleSubmit"` でローカル検索、`mgrep --web "Next.js 15 app router changes"` でWeb検索
- **Git worktreeコマンド**: `git worktree add /feature-branch feature-branch` で独立したチェックアウトを作成
- **キーボードショートカット**: `!git status`、`/commit`、`/compact` など

## Normalized Conditions

- **Use Cases**:
    - Claude Codeでの大規模プロジェクト開発で生産性を最大化したい場合
    - 複数のMCP/Pluginを効果的に管理し、コンテキストウィンドウを最適化したい場合
    - コードの品質をHooksで自動的に担保したい場合
    - 責任を分離し、Sub Agentで集中実行したい場合
    - 外部サービス（Supabase、GitHub、Vercel、Firecrawlなど）とプロンプトベースで統合したい場合
    - 長時間実行コマンドをtmuxで管理したい場合
    - 並列ワークフローでタスクを効率化したい場合
    - ベストプラクティスをRulesで一貫して適用したい場合
    - エディタなしでコードインテリジェンスを得たい場合
    - PRの自動コードレビューをGitHub Actions CI/CDで実現したい場合

- **Anti-Cases**:
    - Claude Codeを初めて使う初心者（設定が複雑すぎる可能性）
    - シンプルな単発タスクのみ実行する場合（オーバーエンジニアリング）
    - コンテキスト管理を意識せず、全MCPを有効化してしまう場合（パフォーマンス低下）
    - Skillの再利用性を考慮せず、アドホックにワークフローを定義する場合
    - Sub Agentのスコープを適切に制限せず、全ツールへのアクセスを許可してしまう場合

- **Prerequisites**:
    - Claude Codeの基本的な理解
    - Git、Git worktreesの知識
    - tmuxの基本操作
    - Anthropicドキュメントを参照する意欲（著者は「何度も読んで、今やリアルのMCPみたいなもの」と述べている）
    - MCP、Skill、Hook、Sub Agent、Pluginの概念理解
    - JSON/Markdownの編集スキル

- **Decision Triggers**:
    - Claude Codeのコンテキストウィンドウが70k以下まで減少し、パフォーマンスが低下したとき → 未使用MCP/Pluginを無効化
    - デッドコードや不要な.mdファイルが蓄積したとき → `/refactor-clean` Skillを実行
    - テストが必要なとき → `/tdd`、`/e2e`、`/test-coverage` Skillを連鎖実行
    - 長時間実行コマンドでセッションが切断されるリスクがあるとき → tmuxを使用
    - 複数の独立したタスクを並列実行したいとき → `/fork` またはGit worktreesを使用
    - コードの品質を自動的に担保したいとき → Hooksでフォーマット、リント、チェックを自動化
    - 役割別にタスクを分離したいとき → Sub Agentを定義
    - 外部サービスとプロンプトベースで統合したいとき → MCPを設定
    - Anthropicハッカソンで優勝したい場合（著者の実績）
