---
title: Google Antigravity(第3回)：Browser連携入門・安全に"ブラウザ操作"をエージェントに任せる
url: https://zenn.dev/yujmatsu/articles/20260119_antigravity_browser
captured_at: 2026-01-25
published_at: 2026-01-19
---

# Google Antigravity(第3回)：Browser連携入門・安全に"ブラウザ操作"をエージェントに任せる

## TL;DR & Key Conclusions
Google AntigravityのBrowser連携機能は、エージェントが実ブラウザを操作できるようにする機能で、ログイン・クリック・フォーム入力など人間の操作を含むタスクを自動化できる。スクリーンショット/録画を成果物として保存でき、手順の再現性が向上する。セットアップは「Setup実行 → 拡張インストール → 権限許可 → スクショ確認」の流れで完了し、初心者はログイン不要サイトから開始してローカル環境へ拡大することが推奨される。

- **Browser連携の本質**: エージェントが実ブラウザを操作できるようにする機能で、検索・要約だけでは解決しづらいタスク（ログイン必要、クリック操作、フォーム入力、見た目確認）に対応
- **成果物の保存**: スクリーンショット・録画・操作ログを記録可能で、手順の再現性が向上
- **セットアップ要件**: Google Antigravity本体、Chrome（またはサポートブラウザ）、ブラウザ拡張機能（Bridge役）の3つ
- **セットアップフロー**: 依頼投げ → Setup実行 → 拡張インストール → 権限許可 → スクショ確認の5ステップ
- **実務適用例**: ドキュメント調査（根拠リンク付き）、UI検証（操作手順の動画記録）、定型運用タスク自動化、ローカル環境検証
- **セキュリティ原則**: 初期はログイン不要サイトで検証、破壊的操作は人間承認必須、Allowlistで許可ドメイン限定、機密情報入力禁止
- **動作確認の最重要指標**: スクリーンショットが出力されることが動作確認の最重要ポイント
- **依頼テンプレート**: 目的・対象・制約・出力形式を明示することで迷子になる確率を低減
- **トラブル回避**: 会社PCで拡張がブロックされる場合は個人PCで検証、WSL環境では`--bind 0.0.0.0`オプション使用、MFA/CAPTCHAでは手動ログイン後に操作
- **適用範囲の拡大**: example.com → 公開ドキュメント → localhost → 開発環境 → 本番環境（読み取り専用）の順で段階的に拡大
- **確認粒度の向上**: ドキュメント根拠の抽出や画面状態に基づく分岐が容易になり、「この画像が表示されていたらA、されていなければB」といった判断が可能
- **手順の一気通貫**: UI操作の再現手順をエージェントに実行させ、スクリーンショットや録画を成果物として残すことで、手順が追跡可能になる

## Quickstart
1. **Browser連携を使う依頼を投げる**: Antigravityチャットで「ブラウザでexample.comを開いてページタイトルをメモしてください」と依頼
2. **セットアップを実行**: 案内に従いブラウザ拡張をインストールし、Antigravity↔ブラウザの接続を許可
3. **権限確認**: 拡張機能の権限内容を確認して許可（最初はログイン不要サイトでテストするのが安全）
4. **動作確認**: スクリーンショットが出力されれば成功（これが最重要の確認ポイント）
5. **チェック1（外部サイト）**: 「ブラウザで https://example.com を開き、ページタイトルを教えて。スクショも残して」と依頼
6. **チェック2（ローカルHTTPサーバ）**: `mkdir -p ~/antigravity-browser-check && cd ~/antigravity-browser-check` および `python3 -m http.server 8000` を実行後、「ブラウザでhttp://localhost:8000を開いて」と依頼（WSLの場合は `python3 -m http.server 8000 --bind 0.0.0.0` を使用）
7. **チェック3（スクロール・クリック操作）**: 「ページをスクロールして最初の見出しのテキストを抜き出して」と依頼

## Context & Claims (Claim-Evidence-Caveat)
- **Claim**: Browser連携により、検索・要約だけでは解決しづらいタスクに対応できる
    - **Evidence**: ログイン必要、クリック操作、フォーム入力、見た目確認などの操作が可能になる
    - **Caveat**: セキュリティリスクがあるため、初期はログイン不要サイトでテスト、破壊的操作は承認必須、Allowlistで範囲限定が必要

- **Claim**: スクリーンショット/録画を成果物として保存できる
    - **Evidence**: UI検証でバグ再現手順をエージェントに実行させ、録画を成果物として共有できる
    - **Caveat**: スクリーンショットが出力されない場合、依頼文に「ブラウザで開いて」「スクショを出して」と明記する必要がある

- **Claim**: 手順の再現性が向上する
    - **Evidence**: UI操作の再現手順をエージェントに実行させることで、手順が一気通貫で追跡可能になる
    - **Caveat**: MFA/CAPTCHAで停止する場合があるため、手動ログイン後に操作させる必要がある

- **Claim**: 確認の粒度を上げやすい
    - **Evidence**: ドキュメント根拠の抽出や画面状態に基づく分岐が容易で、「この画像が表示されていたらA、されていなければB」といった判断が可能
    - **Caveat**: 軽いページから始める必要があり、認証が必要な場合は手動でログインする必要がある

- **Claim**: セットアップは5ステップで完了する
    - **Evidence**: 依頼投げ → Setup実行 → 拡張インストール → 権限許可 → スクショ確認の流れ
    - **Caveat**: 会社PCで拡張がブロックされる場合は個人PCで検証後、IT管理部門に相談が必要

- **Claim**: ローカル環境（localhost）での動作確認が可能
    - **Evidence**: `python3 -m http.server 8000` でHTTPサーバを起動し、「ブラウザでhttp://localhost:8000を開いて」と依頼することで確認可能
    - **Caveat**: WSL環境では `python3 -m http.server 8000 --bind 0.0.0.0` を使用する必要がある。ファイアウォール設定の確認も必要

- **Claim**: 依頼テンプレート（目的・対象・制約・出力）を使うことで迷子になる確率を低減できる
    - **Evidence**: 目的（何を達成したいか）、対象（URL/対象画面）、制約（ログインはしない、破壊操作は禁止など）、出力（結果+根拠+スクショ/録画）を明示
    - **Caveat**: テンプレートを使用しても、操作が進まない場合は軽いページから始める必要がある

- **Claim**: Allowlist（許可リスト）で範囲を絞ることでセキュリティを確保できる
    - **Evidence**: docs.google.com、console.cloud.google.com、自社のstaging.example.comなど必要なドメインのみ許可し、不明な外部サイトは拒否
    - **Caveat**: URLが許可されていない場合、Allowlistに登録されているか確認する必要がある

- **Claim**: 実務での活用例として、ドキュメント調査・UI検証・手作業の定型化・ローカル環境確認がある
    - **Evidence**: 公式Docの該当箇所を探し根拠リンク付きでまとめる、バグ再現手順を録画して共有、管理画面チェックを半自動化、localhost画面の表示確認
    - **Caveat**: それぞれのシーンで異なる制約があり、ドキュメント調査では根拠リンクの精度、UI検証では再現性、定型化では破壊操作の承認が重要

- **Claim**: 適用範囲は段階的に拡大すべき
    - **Evidence**: example.com → 公開ドキュメント → localhost → 開発環境 → 本番環境（読み取り専用）の順で拡大
    - **Caveat**: 本番環境では読み取り専用に限定し、破壊的操作は人間承認必須

- **Claim**: トラブルシューティングガイドが提供されている
    - **Evidence**: Setupが出ない、拡張がインストールできない、操作が進まない、localhostが開けない、URLが許可されていないなどの問題に対する対処法を記載
    - **Caveat**: 問題によって対処法が異なり、環境依存の問題（WSL、ファイアウォール、会社PC）もある

- **Claim**: スクショが出ることが動作確認の最重要指標
    - **Evidence**: スクリーンショットが出力されればBrowser連携は機能している
    - **Caveat**: スクリーンショットが出ない場合、依頼文の書き方や拡張機能の設定を確認する必要がある

## Code Snippets
- **ローカルHTTPサーバ起動（通常環境）**: `mkdir -p ~/antigravity-browser-check && cd ~/antigravity-browser-check` および `python3 -m http.server 8000` を実行し、localhostでの動作確認に使用
- **ローカルHTTPサーバ起動（WSL環境）**: `python3 -m http.server 8000 --bind 0.0.0.0` を実行し、WSL環境でlocalhostへの接続問題を回避
- **依頼テンプレート**: 「目的：何を達成したいか / 対象：URL / 対象画面 / 制約：ログインはしない、破壊操作は禁止、など / 出力：結果 + 根拠 + スクショ/録画」の形式で依頼を構造化
- **動作確認用チェック1（外部サイト）**: 「ブラウザで https://example.com を開き、ページタイトルを教えて。スクショも残して」と依頼
- **動作確認用チェック3（スクロール・クリック操作）**: 「ページをスクロールして最初の見出しのテキストを抜き出して」と依頼

## Normalized Conditions
- **Use Cases**:
    - ドキュメント調査で公式Docの該当箇所を探し、根拠リンク付きで手順書化したい場合
    - UI検証でバグ再現手順をエージェントに実行させ、録画を成果物として共有したい場合
    - 管理画面チェックや監視画面スクショ取得などの定型運用タスクを半自動化したい場合
    - localhost環境の画面表示確認や導線テストを行いたい場合
    - エージェントにログイン・クリック・フォーム入力などの人間の操作を含むタスクを自動化させたい場合
    - スクリーンショット・録画・操作ログを成果物として残したい場合
    - 手順の再現性を向上させたい場合
    - ドキュメント根拠の抽出や画面状態に基づく分岐を容易にしたい場合
- **Anti-Cases**:
    - 検索して要約するだけで解決できるタスク（Browser連携は不要）
    - 機密情報を入力する必要があるタスク（セキュリティリスクが高い）
    - 破壊的操作（送信・購入・削除）を人間の承認なしで実行したい場合
    - 会社PCで拡張機能がブロックされており、個人PCでの検証もできない場合
    - MFA/CAPTCHA認証を自動化したい場合（手動ログインが必要）
- **Decision Triggers**:
    - エージェントにブラウザ操作を任せたいと思ったとき
    - スクリーンショットが出力されることを動作確認の指標としたいとき
    - ログイン不要サイト（example.comや公開ドキュメント）から開始して段階的に適用範囲を拡大したいとき
    - 依頼文に「目的・対象・制約・出力」を明示して迷子になる確率を低減したいとき
    - Allowlist（許可リスト）で範囲を絞ってセキュリティを確保したいとき
    - トラブルシューティングガイドを参照して問題解決したいとき
