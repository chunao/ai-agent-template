---
title: ⚡製図革命2.0⚡draw.io で図を作る AI スキルを作ってみた🚀
url: https://qiita.com/aktsmm/items/199869941e2d6a8b46a0
captured_at: 2026-01-22
published_at: 2026-01-22
---

# ⚡製図革命2.0⚡draw.io で図を作る AI スキルを作ってみた🚀

## TL;DR & Key Conclusions
以前紹介した「AG-Diagram Maker」をスキルとしてパッケージ化し、SKILL NINJAでワンクリックインストール可能にした。AIに「アーキテクチャ図を作って」と依頼すると、編集可能な.drawioファイルが出力され、GUI上で自由に調整できる。Mermaidと異なり、draw.ioは生成後の微調整がドラッグ&ドロップで可能なため、「AI で叩き台 → GUI で仕上げ」というワークフローに最適。

- **スキル化による利便性向上**: リポジトリのcloneが不要になり、SKILL NINJA拡張機能でワンクリックインストールが可能
- **編集可能な図の出力**: AIが生成した.drawioファイルをVS Code上でGUIベースで編集可能
- **クラウドアイコン対応**: Azure/AWSの公式アイコンを使った構成図を生成可能（azure2形式を使用）
- **Azure アイコンのハマりポイント**: VS Codeでの表示には`azure2`形式（`img/lib/azure2/**/*.svg`）が必須。旧形式の`shape=mxgraph.azure.*`では青い四角形になる
- **3-Agentワークフロー**: flow-orchestrator（要件整理）→ manifest-gateway（マニフェスト生成）→ svg-forge（図面生成・自己検証）の3段階処理で手戻りを削減
- **Progressive Disclosure設計**: スキル情報を3段階（メタデータ → SKILL.md → references/）でロードし、コンテキストウィンドウを効率的に使用
- **スキル発動のプロンプト術**: 「SKILL使って」「Azureアイコン使って」と明示することで確実にスキルを発動し、正しいアイコン形式を選択させる
- **draw.io ファイルはXML**: mxCell要素で構成され、ルート（id="0"）とデフォルト親（id="1"）が必須、ノード（vertex="1"）とエッジ（edge="1"）で図を構築
- **多様な入力形式に対応**: テキスト、Excel、Markdown、画像/スクリーンショットから図を生成可能
- **ライセンス**: CC BY-NC-SA 4.0（個人利用・学習目的は自由、商用利用は別途相談が必要）

## Quickstart
1. **前提条件の確認**: VS Code、GitHub Copilot拡張機能（Agentモード）、Draw.io Integration拡張機能、SKILL NINJA拡張機能がインストール済みであること
2. **SKILL NINJA拡張機能を開く**: VS CodeでSKILL NINJAを起動
3. **ソースリポジトリの追加**: 設定画面から「Add Source Repository」で`aktsmm/Agent-Skills`を追加
4. **スキルのインストール**: 「drawio-diagram-forge」を検索してインストール
5. **図の生成**: Copilot Chatで「Azureと AWSを使った構成図を作って。SKILLも使って」と指示
6. **GUIでの編集**: 生成された.drawioファイルをVS Codeで開き、必要に応じてドラッグ&ドロップで調整

## Context & Claims (Claim-Evidence-Caveat)
- **Claim**: Mermaidよりもdraw.io + AIの方が「あとで何度も直す図」に適している
    - **Evidence**: Mermaidは修正のたびにコードを書き換える必要があるが、draw.ioはGUIでドラッグするだけで調整できる
    - **Caveat**: 一部のアイコンがうまく反映されない場合があり、手直しが必要になることもある

- **Claim**: Azure アイコンはazure2形式を使用しないとVS Codeで正しく表示されない
    - **Evidence**: 旧形式の`shape=mxgraph.azure.*`ではVS Code上で青い四角形になるが、`image=img/lib/azure2/**/*.svg`形式では正しく表示される
    - **Caveat**: スキル側で既に対応済みのため、利用者は特に意識する必要はない

- **Claim**: スキル化により導入の手軽さが大幅に向上した
    - **Evidence**: 以前はリポジトリをcloneして手動配置する必要があったが、SKILL NINJAでワンクリックインストール可能になった
    - **Caveat**: `aktsmm/Agent-Skills`はプリセットには含まれていないため、手動でソースリポジトリに追加する必要がある

- **Claim**: 明示的なプロンプト指示によりスキルの発動確率が上がる
    - **Evidence**: 「SKILL使って」「Azureアイコン使って」と明示することで、スキルのトリガーと正しいアイコン形式の選択が確実になる
    - **Caveat**: 高性能モデル（Claude Opus 4.5など）を使用することで出力品質が向上する

- **Claim**: draw.ioファイルの本質はXMLであり、AI生成が可能
    - **Evidence**: mxCellで構成されたXML構造を持ち、ルート・デフォルト親・ノード・エッジの要素で図を定義できる
    - **Caveat**: mxCell完全性ルールに従う必要があり、必要なmxCell数 ≥ 2 + ノード数 + エッジ数

- **Claim**: 3-Agentワークフローにより手戻りが削減される
    - **Evidence**: flow-orchestrator（要件整理・方針決め）→ manifest-gateway（マニフェスト生成）→ svg-forge（図面生成・自己検証）という3段階処理により、入力→中間表現→出力の流れを作る
    - **Caveat**: 詳細な実装については過去記事を参照する必要がある

- **Claim**: Progressive Disclosure設計によりコンテキストウィンドウを効率的に使用
    - **Evidence**: メタデータ（~100語、常時）→ SKILL.md本文（<5k語、トリガー時）→ references/（無制限、必要時）の3段階ロード
    - **Caveat**: 必要な情報のみをロードするため、スキルの全情報が常に利用可能なわけではない

## Code Snippets
- **mxCellのXML例（ルートとデフォルト親）**: draw.ioファイルの必須構造要素であるルート（id="0"）とデフォルト親（id="1"）の定義方法
- **mxCellのXML例（ノード）**: 図形要素（vertex="1"）の定義とジオメトリ情報（位置・サイズ）の指定方法
- **mxCellのXML例（エッジ）**: 接続線（edge="1"）の定義とsource/target指定によるノード間の接続方法
- **Azureアイコンの旧形式（非推奨）**: `shape=mxgraph.azure.*`形式はVS Codeで青い四角形になる問題がある
- **Azureアイコンの推奨形式**: `aspect=fixed;image=img/lib/azure2/**/*.svg`形式を使用することでVS Codeでの正しい表示を実現
- **スキルのファイル構成**: SKILL.md、references/（mxcell-structure.md、cloud-icons.md、style-guide.md）、scripts/（validate_drawio.py）
- **手動インストールコマンド**: リポジトリcloneとスキルファイルのコピーによる手動導入方法

## Normalized Conditions
- **Use Cases**:
    - あとで何度も編集・調整する必要がある図を作成したい場合
    - Azure/AWSアーキテクチャ図を公式アイコンを使って作成したい場合
    - テキスト、Excel、Markdown、画像などから図を自動生成したい場合
    - AIで叩き台を作り、GUIで仕上げるワークフローを採用したい場合
    - フローチャート、スイムレーン図、構成図などを効率的に作成したい場合
- **Anti-Cases**:
    - 一度作成したら二度と編集しない図（Mermaidでも十分）
    - コードベースで完全に管理したい図（draw.ioのXMLは可読性が低い）
    - 完全に自動生成で手直し不要な図を求める場合（一部アイコンの反映に失敗する可能性がある）
- **Prerequisites**:
    - VS Codeがインストール済み
    - GitHub Copilot拡張機能が有効でAgentモードが使えること
    - Draw.io Integration拡張機能がインストール済み
    - SKILL NINJA拡張機能がインストール済み（手動導入の場合は不要）
    - 高性能な言語モデル（Claude Opus 4.5など）の使用を推奨
- **Decision Triggers**:
    - Mermaidでの図の管理に限界を感じたとき
    - アーキテクチャ図作成の時間を大幅に削減したいとき
    - AIコーディングアシスタントのスキルエコシステムを拡張したいとき
    - クラウドアーキテクチャ図を頻繁に作成・更新する必要があるとき
