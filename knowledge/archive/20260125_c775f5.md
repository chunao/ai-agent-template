---
title: tmux, gwq, fzfでworktreeをサクサク切り替えてAIコーディングを並列する
url: https://zenn.dev/ymat19/articles/9107170744368f
captured_at: 2026-01-25
published_at: 2026-01-18
---

# tmux, gwq, fzfでworktreeをサクサク切り替えてAIコーディングを並列する

## TL;DR & Key Conclusions
git worktreeの頻繁な切り替えを効率化するため、gwq・tmux・fzfの3ツールを組み合わせたワークフローを構築。tmux popup window上でfzfによるブランチ選択→gwqによるworktree自動作成→tmuxセッション切り替えを一連の流れで実行する。

- **gwqの自動命名**: ブランチ名から一意な命名規則でworktreeパスを自動生成し、手動パス指定の手間を削減
- **tmux popup windowの活用**: 複数分割ウィンドウ環境でもpane上に矩形ウィンドウを表示することで操作を中断せずに切り替え可能
- **fzfの優先表示**: 既存worktreeブランチ→ローカルブランチ→リモートブランチの順序で表示し、利用頻度を反映した選択体験を提供
- **対象ユーザー**: tmux愛用者×頻繁なworktree切り替えが必須な環境（特にClaude Code等でAI並列コーディング）
- **VS Codeユーザーには不要**: IDE環境では専用拡張機能で十分なため、このワークフローは主にCLI環境向け

## Quickstart
1. **gwqのインストール**: `go install github.com/ymat19/gwq@latest`
2. **tmux設定**: `.tmux.conf`に以下を追加
   ```bash
   bind w popup -d '#{pane_current_path}' -w90% -h90% -E zsh -c "source ~/.zshrc && ~/scripts/tmux-worktree-switcher.sh"
   ```
3. **スクリプト配置**: [tmux-worktree-switcher.sh](https://github.com/ymat19/dotfiles/blob/main/scripts/tmux-worktree-switcher.sh) を `~/scripts/` に配置
4. **実行**: tmux内で `prefix + w` を押下 → fzfでブランチ選択 → 自動でworktree作成＆セッション切り替え

## Context & Claims (Claim-Evidence-Caveat)
- **Claim**: git worktreeの手動パス指定は煩雑
    - **Evidence**: 「git worktreeって作るときも消すときもパスちゃんと指定しないといけない」という元記事の指摘
    - **Caveat**: gwqを使用するにはGo環境が必要

- **Claim**: tmux popup windowはウィンドウ分割環境での作業中断を防ぐ
    - **Evidence**: 「paneの上に矩形のウィンドウを表示できる」機能により、既存のpane分割レイアウトを保持したまま操作可能
    - **Caveat**: tmux 3.2以降が必要

- **Claim**: fzfの優先表示は利用頻度を反映した選択体験を提供
    - **Evidence**: 「既存のworktreeブランチ→ローカルブランチ→リモートブランチ」の順序で表示することで、よく使うブランチが上位に表示される
    - **Caveat**: ブランチ数が多いと表示が長くなる可能性がある

- **Claim**: このワークフローはCLI環境でのAI並列コーディングに最適
    - **Evidence**: 著者は「Claude Codeを使って複数のissueを並列で進めたい」ニーズから開発
    - **Caveat**: VS Code等のIDE環境では専用拡張機能が存在し、このワークフローは不要

## Code Snippets
- **tmux設定（.tmux.conf）**: tmux内でprefix + wを押下すると、popup window上でworktree切り替えスクリプトを起動
- **tmux-worktree-switcher.sh**: fzfによるブランチ選択→gwqによるworktree作成→tmuxセッション切り替えを一連で実行するメインスクリプト

## Normalized Conditions
- **Use Cases**:
    - tmuxを主要な開発環境として使用している
    - Claude Code等でAIコーディングを並列実行する
    - 複数のissueやfeatureブランチを頻繁に行き来する
    - git worktreeを活用した並列作業を効率化したい
- **Anti-Cases**:
    - VS CodeやJetBrains IDE等のGUIツールで開発している（拡張機能で十分）
    - worktreeの切り替え頻度が低い
    - tmuxを使用していない
- **Decision Triggers**:
    - tmuxユーザーで、1日に5回以上worktreeを切り替える
    - AI並列コーディングでworktree管理が煩雑になった
    - CLIベースのワークフローを最適化したい
