---
title: Claude CodeとCodexの連携をMCPからSkillに変えたら体験が劇的に改善した
url: https://zenn.dev/owayo/articles/63d325934ba0de
captured_at: 2026-01-21
published_at: 2025-01-21
---

# Claude CodeとCodexの連携をMCPからSkillに変えたら体験が劇的に改善した

## TL;DR & Key Conclusions
Claude Codeの相棒としてCodex CLIを併用する際、MCPでの連携には進捗の不可視化や長時間の無応答といった課題があった。Skillとして再実装することで、リアルタイム進捗確認、適切な制御、トラブルシューティングの容易化が実現され、開発体験が劇的に改善された。

- **進捗の可視化**: MCPではブラックボックスだった実行中の処理が、Skillではリアルタイムで確認可能になった
- **即時呼び出し**: スラッシュコマンド（`/codex`）や自然な文章（「codexと相談して」）で即座に起動できる
- **制御性の向上**: 想定と異なる方向に進んでいる場合、早期に中断・修正が可能になった
- **長時間タスクの適性**: MCPは短時間タスク向き、Skillは長時間実行タスクに最適
- **学習効果**: Codexの問題解決アプローチをリアルタイムで観察でき、自身のスキル向上につながる
- **トラブルシューティング**: エラー発生時の原因特定が容易になった
- **別視点の活用**: Claude Codeが行き詰まった問題をCodexの異なるアプローチで解決できる

## Quickstart
1. **Skillファイルの作成**: `.agent/skills/codex/SKILL.md` を作成し、YAMLフロントマターで `name: codex` と設定
2. **トリガーの定義**: `description` フィールドにトリガーワード（「codex」「レビューして」等）を記載
3. **実行コマンドの記述**: `codex exec --full-auto --sandbox read-only --cd <project_directory> "<request>"` をドキュメント化
4. **呼び出し**: Claude Codeで `/codex` または「codexに聞いて」などと指示
5. **リアルタイム確認**: 実行中の出力を観察し、必要に応じて中断・修正

## Context & Claims (Claim-Evidence-Caveat)
- **Claim**: MCPでの連携は長時間タスクに不向き
    - **Evidence**: 複雑なタスクでは数十分～1時間以上の待ち時間が発生し、進捗が全く見えない。タイムアウトの不安やデバッグの困難さが顕著
    - **Caveat**: 短時間で結果が返るタスクであれば、MCPでも十分実用的である可能性がある

- **Claim**: Skillによる実装で進捗の可視化が実現
    - **Evidence**: Codexの出力がリアルタイムで表示され、何を調査しているか、どこまで進んでいるかが明確になった
    - **Caveat**: 実装にはSkillファイルの作成とコマンド形式の設計が必要で、初回セットアップに若干の手間がかかる

- **Claim**: スラッシュコマンドで自然な呼び出しが可能
    - **Evidence**: `/codex` で即座に起動でき、「codexと相談して」「レビューして」などの自然な文言でも呼び出せる
    - **Caveat**: Claude CodeのSkill機能に依存するため、他のツールでは同様の体験が得られない可能性がある

- **Claim**: Codexは別視点からのアプローチを提供
    - **Evidence**: Claude Codeが行き詰まった問題や複雑な調査が必要なタスクで、Codexが異なる視点から解決策を提示
    - **Caveat**: 必ずしも全ての問題で有効とは限らず、タスクの性質によっては単一エージェントで十分な場合もある

## Code Snippets
- **Skill YAMLフロントマター**: Skillの基本情報（name、description、トリガーワード）を定義し、Claude Codeでの呼び出し方法を設定
- **Skillドキュメント本体**: Codex実行コマンドの形式、パラメータ説明、使用例（コードレビュー、バグ調査）、実行手順を記載

## Normalized Conditions
- **Use Cases**:
    - 複雑な問題の調査や長時間実行が予想されるタスク
    - コードレビュー、設計相談、バグ調査、文言検討など多目的な開発支援
    - Claude Codeと異なる視点からのアプローチが欲しい場合
    - リアルタイムで進捗を確認しながら作業を進めたい場合
- **Anti-Cases**:
    - 短時間で完結する単純なタスク（MCPでも十分）
    - Claude Code単独で十分に解決可能な明確なタスク
    - Codex CLIがインストールされていない環境
- **Prerequisites**:
    - Claude Code環境
    - Codex CLIのインストール
    - Skillファイルの作成・配置（`.agent/skills/` 配下）
    - プロジェクトディレクトリへのアクセス権限
- **Decision Triggers**:
    - MCPでの実行中に進捗が見えず不安を感じた時
    - 長時間実行タスクでタイムアウトの心配がある時
    - デバッグや原因究明が困難な問題に直面した時
    - 複数のAIツールを組み合わせて効率化したい時
- **Failure Modes / Risks**:
    - Skillファイルの記述ミスによる起動失敗
    - Codex CLIのバージョン不一致やインストール不備
    - プロジェクトディレクトリのパス指定ミス
    - read-onlyサンドボックスでは書き込み操作が制限される
- **Operational Cost**:
    - 初回Skillファイル作成の手間（一度作成すれば再利用可能）
    - Codex実行時のAPI利用料金（OpenAI）
    - 長時間実行タスクの観察・監視コスト（ただしMCPより低減）
